<!--
 * @Author: yongyuan253015@gmail.com
 * @Date: 2021-11-28 22:45:41
 * @LastEditors: Please set LastEditors
 * @LastEditTime: 2021-11-29 22:30:24
 * @Description: 文件描述
-->
网站性能优化的指标：
1. 白屏
2. 首屏
3. 页面整体加载
4. 页面可交互
5. 功能交互响应

### 白屏

在用户输入URL后到页面渲染出来的时间，就是白屏的时间，这个时间越短越好，因为这是网站留给用户的第一个印象。

一般是从StartRender或者是FirstPaint开始计时。

浏览器从DNS服务器中进行域名查询后，浏览器解析域名拿到对应的IP地址，才能和服务器进行通信。

很多时候，在页面加载中，会有很多次的DNS查询，因为这里包含了页面本身的域名查询，还有浏览器在解析HTML页面代码的时候，需要加载JS代码、CSS和Image这些资源。


##### DNS解析优化思路

1. DNS缓存优化
2. DNS预加载策略
3. 页面中资源的域名合理分配
4. 使用稳定可靠的DNS服务器


### 建立TCP请求连接

##### 三次握手建立连接，

TCP通过三次握手建立连接，提供可靠的数据传输服务。

在这个过程中可以做优化：

1. 基于不同的网络环境，优化数据包的大小，来减少数据因为传输丢失或者被破坏产生的重复传输，提高传输效率。

2. 网络传输链路的优化。一般常见的是部署在不同地区的后台服务，再来针对性的建立高速的专属网络通道。

### 服务端请求处理响应

### 客户端下载、解析、渲染显示页面

1. 如果是Gzip包，则先解压为HTML
2. 解析HTML的头部代码，下载头部代码中引入的样式资源或者是脚本资源文件。
3. 解析HTML和样式会产生两个树状结构【HTML的DOM树和cssOM树】

4. 通过遍历DOM树和cssOM树，浏览器依次计算每一个节点的大小、坐标、颜色等样式，构造出渲染树。

5. 根据渲染树，完成绘制过程。

这个过程是解析HTML代码后，下载css代码，然后继续解析HTML代码，生成DOM树。DOM树构建结束后，开始构建CSSOM树。如果样式下载足够快的话，DOM树和CSSOM树会同时进行，结束后开始绘制。

但是，在中途如果遇见了JavaScript，会阻断DOM树的构建。


### 首屏时间
